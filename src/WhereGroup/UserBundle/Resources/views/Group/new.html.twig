{% extends 'WhereGroupThemeBundle:Template:admin.html.twig' %}

{% do form.users.setRendered %}

{% if form.vars.value.id is defined and form.vars.value.id is not empty %}
    {% set title  = 'Gruppe bearbeiten'|trans %}
    {% set path   = 'metador_admin_group_update' %}
    {% set params = {id: form.vars.value.id} %}
{% else %}
    {% set title  = 'Gruppe erstellen'|trans %}
    {% set path   = 'metador_admin_group_create' %}
    {% set params = {} %}
{% endif %}


{# CONTENT #}
{% block content %}
    <h1>{{ title }}</h1>

    <div class="basic-form">
        {{ form_row(form.role) }}
        {{ form_row(form.description) }}
        {{ form_row(form._token) }}

        <div>
            {{ form_label(form.users) }}
            <select name="{{ form.users.vars.full_name }}" multiple="multiple">
            {% for user in users %}
                <option value="{{ user.id }}" {% if user.id in form.users.vars.value %} selected="selected" {% endif %}>
                    {{ user.username }}
                </option>
            {% endfor %}
            </select>
        </div>

    </div>
{% endblock %}

{# MENU #}
{% block plugin_menu %}
    {{ parent() }}

    <li>
        <button type="submit" class="no-style-button">
            <span class="icon-floppy-disk"></span>
            {% trans %}speichern{% endtrans %}
        </button>
    </li>
{% endblock %}

{# FORM START #}
{% block form_start %}
    {{ form_start(form, { 'action': path(path, params), 'method': 'POST', 'attr': {
        novalidate: 'novalidate', autocomplete: 'off'
    }}) }}
{% endblock %}

{# FORM END #}
{% block form_end %}
    {{ form_end(form) }}
{% endblock %}
